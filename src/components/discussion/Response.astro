---
import Heading from "./Heading.astro";
import { limitTextCharacters } from "../../helpers/helpers";

interface Props extends DiscussionResponse {}

const { description, references } = Astro.props;
---

<div>
  <div class="mb-8 ml-6 border-l-2 border-black pl-2">
    <Heading {...Astro.props} />
    <p class="text-sm mb-4">{limitTextCharacters(description, 250)}</p>
    <button class="read-more-button text-sm py-1 mb-2 underline">Read More</button>
    <!-- <p class="text-sm mt-2">{references}</p> -->
  </div>
  <dialog>
    <div class="p-4">
      <Heading {...Astro.props} />
      <p class="text-sm mb-4">{description}</p>
      <p class="text-sm mt-2">{references}</p> 
      <button class="dialog-button p-1 bg-blue-400">Close</button>
    </div>
  </dialog>
</div>

<script>
  const dialog = document.querySelector("dialog");
  const readMoreButton = document.querySelector(".read-more-button");
  const closeButton = document.querySelector(".dialog-button");

  // "Show the dialog" button opens the dialog modally
  readMoreButton!.addEventListener("click", () => {
    dialog!.showModal();
  });

  // "Close" button closes the dialog
  closeButton!.addEventListener("click", () => {
    dialog!.close();
  });
</script>
